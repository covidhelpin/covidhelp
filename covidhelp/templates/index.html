{% extends "base.html" %}

{% block content_heading %} HomePage {% endblock content_heading%}

{%block content_menu%}
<div class="box is-hidden-desktop">
  Quick jump:
<a href="#available">
  Available
</a>
/
<a href="#helpneeded">
  Help Needed
</a>
/
<a href="#links">
  Useful Links
</a>
</div>
{%endblock content_menu %}


{% block content_body %}

<p><code>Note: Click on name for more details. Click on city for list in city.</code></p>
<section class="section">

    <div class="columns">

    <!--- AVAILABILITY -->
    <div class = "column">
        <article class="message">
          <div class="message-header has-background-white has-text-black has-text-link">
            <p><a id="available" class="subtitle" href="{% url 'available_lists' %}">Availability</a> <span class="tag"> {{available_count}} </span></p>
            <a href="{% url "add_available" %}" class="button is-small is-rounded">+ Add</a>

          </div>
        </article>

      {% for item in available_list %}
          {% if item.verified == "V" %}
          <article class="message is-success">
          {% elif item.verified == "U" %}
          <article class="message is-warning">
          {% else %}
          <article class="message is-danger">
          {% endif %}
            <div class="message-header">
              <p><a href="{% url "available_details" item.pk %}">{{item}}</a> has <b>{{item.type}}</b> in <a href="{% url "available_city_lists" item.location %}">{{item.location}}</a></p>
              <span class="tag" >{{item.get_verified_display}}</span>
            </div>

            <div class="message-body">
              <small>Contact: {{item.contact_number}}<br>
              {% if item.additional_text %}
              {{item.additional_text|linebreaksbr}}<br>
              {% endif %}
              <small>Last update : {{item.last_verified|timesince}}</small>, added by {{item.created_by|capfirst}}</small>
            </div>
          </article>
      {% endfor %}
    </div>

    <!--- HELP NEEDED ---->
    <div class = "column">
    <article class="message">
      <div class="message-header has-background-white has-text-black has-text-link">
        <p> <a id="helpneeded" class="subtitle" href="{% url 'patient_lists'%}">Help needed</a> <span class="tag">{{help_count}}</span></p>
        <a href="{% url "add_patient" %}" class="button is-small is-rounded">+ Add</a>
      </div>
    </article>

    {% for item in help_required_list %}
      {% if item.type == "C" %}
      <article class="message is-success">
      {% else %}
      <article class="message is-warning">
      {% endif %}
        <div class="message-header">
          <p><a href="{% url "covidhelp_details" item.pk %}">{{item.patient_name}}</a> [{{item.patient_contact_no}}] requires <b>{{item.patient_requirements}}</b> in {{item.location_city}}</p>
          <span class="tag is-small">{{item.get_status_display}} </span>
        </div>
        <div class="message-body">
          <small>SPO2 : <strong>{{item.patient_s02_level}}</strong> / BG : <strong>{{item.patient_blood_group}}</strong> / Age : <strong>{{patient_age}}</strong><br>
          <!--{% if item.additional_text %}
          {{item.additional_text|linebreaksbr}}<br>
          {% endif %}-->
          <small>Posted : {{item.date|timesince}} ago, added by {{item.created_by|capfirst}}</small></small>
        </div>
      </article>
    {% endfor %}
    </div>

    <div class = "column">
      <article class="message">
        <div class="message-header has-background-white has-text-black has-text-link">
          <p id="links" class="subtitle"> Useful Links </p>
          </div>
      </article>

      <ul>
        {%for item in link_list%}
        <li>
          <a href="{{item.url}}" target="new">{{item}}</a>
        </li>
        {% endfor %}

      </ul>
    </div>

  </div>

</section>
{% endblock content_body %}
